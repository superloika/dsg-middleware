(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{32:function(t,e,a){"use strict";a.r(e);var r={name:"InvoicesImport",data:function(){return{file:null}},methods:{formSubmit:function(){var t=this,e=this;this.AppStore.overlay(!0),this.PrincipalsStore.state.isGeneratingData=!0,this.AppStore.state.showTopLoading=!0;for(var a={headers:{"content-type":"multipart/form-data"},onUploadProgress:function(a){var r=a.loaded/e.file.size*100,o="Importing...";r<100?o="Uploading... "+r.toFixed(0)+"%":100==r?o="File uploaded":r>100&&(o="Generating data..."),t.AppStore.state.overlay.msg=o}},r=new FormData,o=0;o<this.file.length;o++)r.append("files["+o+"]",this.file[o]);var s=this.AppStore.state.siteUrl+"principals/"+this.PrincipalsStore.state.selectedPrincipalCode+"/invoices/import";axios.post(s,r,a).then((function(e){e.data.success;var a=e.data.message,r=e.data.output_template,o=(e.data.line_count,e.data.raw_invoices);t.AppStore.overlay(!1),t.PrincipalsStore.state.isGeneratingData=!1,t.AppStore.state.showTopLoading=!1,t.AppStore.toast(a),t.PrincipalsStore.state.currentGeneratedData=Object.entries(r),t.PrincipalsStore.state.currentRawInvoices=o,t.PrincipalsStore.state.sheetImport=!1,console.log("currentGeneratedData:",t.PrincipalsStore.state.currentGeneratedData),console.log("currentRawInvoices:",t.PrincipalsStore.state.currentRawInvoices)})).catch((function(e){t.AppStore.overlay(!1),t.AppStore.toast(e),t.PrincipalsStore.state.isGeneratingData=!1,console.log("ImportResponse:",e)}))},getPending:function(){var t=this,e=this.AppStore.state.siteUrl+"principals/"+this.PrincipalsStore.state.selectedPrincipalCode+"/invoices/import";axios.post(e,{files:null}).then((function(e){if(e.data.success){var a=e.data.output_template,r=e.data.raw_invoices;t.AppStore.overlay(!1),t.PrincipalsStore.state.isGeneratingData=!1,t.AppStore.state.showTopLoading=!1,t.PrincipalsStore.state.currentGeneratedData=Object.entries(a),t.PrincipalsStore.state.currentRawInvoices=r,console.log("currentGeneratedData:",t.PrincipalsStore.state.currentGeneratedData),console.log("currentRawInvoices:",t.PrincipalsStore.state.currentRawInvoices)}})).catch((function(e){t.AppStore.overlay(!1),t.AppStore.toast(e),t.PrincipalsStore.state.isGeneratingData=!1,console.log("getPending():",e)}))}},created:function(){},mounted:function(){console.log("InvoicesImport mounted.")}},o=a(0),s=Object(o.a)(r,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-card",{staticClass:"elevation-0 pa-0",attrs:{outlinedx:""}},[a("v-card-text",{staticClass:"pa-0"},[a("v-row",{},[a("v-col",{staticClass:"pb-0",attrs:{cols:"",lg:"9",md:"7",sm:"8"}},[a("v-form",{ref:"frm_upload"},[a("v-file-input",{attrs:{"small-chips":"","show-sizex":"",rounded:"",outlined:"",dense:"",required:"",placeholder:"Select file/s to import",accept:".txt",multiple:"",color:"primary"},model:{value:t.file,callback:function(e){t.file=e},expression:"file"}})],1)],1),t._v(" "),a("v-col",{staticClass:"pb-0",attrs:{cols:"",lg:"3",md:"5",sm:"4"}},[a("v-btn",{attrs:{dense:"",color:"primary",block:"",rounded:"",depressed:"",loading:t.PrincipalsStore.state.isGeneratingData},on:{click:function(e){return t.formSubmit()}}},[t._v("\n                    Generate\n                ")])],1)],1)],1)],1)}),[],!1,null,null,null);e.default=s.exports}}]);