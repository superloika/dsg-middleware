{"version":3,"sources":["webpack:///resources/js/pages/Principals/common/GeneratedHistory.vue","webpack:///./resources/js/pages/Principals/common/GeneratedHistory.vue?ecfe","webpack:///./resources/js/pages/Principals/common/GeneratedHistory.vue","webpack:///./resources/js/pages/Principals/common/GeneratedHistory.vue?773e","webpack:///./resources/js/pages/Principals/common/GeneratedHistory.vue?f36f"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0GA;AACA;AACA;AAAA;AAAA;AADA,GADA;AAKA;AAAA;AACA,4BADA;AAEA,2EACA,WADA,GAEA,MAFA,CAEA,CAFA,EAEA,EAFA,EAFA;AAKA,uBALA;AAMA,yBANA;AAOA,0CAPA;AAQA;AARA;AAAA,GALA;AAgBA;AACA;AACA,aAFA,uBAEA;AACA;AACA;AACA;AACA,OAFA;AAGA;AACA,KARA;AAUA,iBAVA,2BAUA;AACA;AACA,KAZA;AAcA,WAdA,qBAcA;AACA;AACA;AAhBA,GAhBA;AAmCA;AAEA;AACA;AACA;AACA;AACA;AACA,YAPA,oBAOA,IAPA,EAOA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA,4BADA,CAEA;AACA;AACA;AACA;;AACA,mBANA,GAOA,6EAEA,IAFA,8BAGA,iDAHA,CAPA;AAAA;AAYA;AACA;AACA;AAdA;AAAA,uBAeA,cAfA;;AAAA;AAeA,mBAfA;AAiBA,uBAjBA,GAiBA;AACA;AACA;AACA;AACA,iBAJA,EAIA,mBAJA,CAjBA;AAuBA;AACA;AACA;AAEA;AA3BA;AAAA;;AAAA;AAAA;AAAA;AA6BA;;AACA;;AA9BA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAgCA,KAvCA;AAyCA,iBAzCA,2BAyCA;AACA,wCACA,kBADA,CACA,0BADA;AAGA,yCACA,aADA,EAEA,yCACA,kBADA,EAEA,aAFA,CAFA,EAMA,IANA,EAOA,gDAPA;AASA;AAtDA,GAnCA;AA4FA;AACA,kBADA,0BACA,GADA,EACA;AACA;AACA;AAHA,GA5FA;AAkGA,SAlGA,qBAkGA;AACA,kFADA,CAEA;AACA,GArGA;AAuGA,SAvGA,qBAuGA;AACA;AACA;AAzGA,G;;;;;;;;;;;;AC1GA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK,0CAA0C,gBAAgB,EAAE;AACjE;AACA;AACA;AACA,SAAS,sBAAsB;AAC/B;AACA;AACA;AACA,aAAa,SAAS,kCAAkC,EAAE;AAC1D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA8B,uBAAuB;AACrD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA,mBAAmB;AACnB;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;AACA,0BAA0B,2CAA2C;AACrE;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,mBAAmB;AACnB;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA,8BAA8B,4BAA4B;AAC1D;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA,kCAAkC,6BAA6B;AAC/D;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kCAAkC,6BAA6B;AAC/D;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA8B,uBAAuB;AACrD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA,mBAAmB;AACnB;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB;AACnB;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS,2BAA2B;AACpC;AACA;AACA;AACA;AACA,iBAAiB,4CAA4C;AAC7D;AACA,gCAAgC,SAAS,gCAAgC,EAAE;AAC3E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB;AACxB,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;AC1OA;AAAA;AAAA;AAAA;AAA+F;AAC3B;AACL;;;AAG/D;AACmG;AACnG,gBAAgB,2GAAU;AAC1B,EAAE,sFAAM;AACR,EAAE,2FAAM;AACR,EAAE,oGAAe;AACjB;AACA;AACA;AACA;;AAEA;;AAEA;AACA,IAAI,KAAU,EAAE,YAiBf;AACD;AACe,gF;;;;;;;;;;;;ACtCf;AAAA;AAAA,wCAA4M,CAAgB,4PAAG,EAAC,C;;;;;;;;;;;;ACAhO;AAAA;AAAA;AAAA;AAAA;AAAA","file":"8.js","sourcesContent":["<template>\n    <v-card outlinedx class=\"elevation-0 pt-0\">\n        <v-card-title class=\"pa-0\">\n            <v-app-bar elevation=\"0\" colorx=\"white\">\n                <v-toolbar-title>\n                    Generated Data History\n                    <div v-if=\"lineCount > 0\">\n                        <v-chip x-small outlinedx label color=\"primary\">\n                            {{ lineCount }} total line/s\n                        </v-chip>\n                    </div>\n                </v-toolbar-title>\n\n                <v-spacer></v-spacer>\n\n                <v-text-field\n                    v-model=\"dateRangeText\"\n                    label=\"Date (YYYY-MM-DD)\"\n                    hide-details\n                    readonly\n                    dense\n                    outlined\n                    rounded\n                    @click.stop=\"datePickerShown=true\"\n                    :disabled=\"isGenerating\"\n                    class=\"mr-3\"\n                    style=\"max-width:230px;\"\n                ></v-text-field>\n                <!-- DATEPICKER -->\n                <v-dialog\n                    ref=\"datePicker\"\n                    v-model=\"datePickerShown\"\n                    :return-value.sync=\"date\"\n                    width=\"290px\"\n                >\n                    <v-date-picker v-model=\"date\" scrollable range>\n                        <v-spacer></v-spacer>\n                        <v-btn\n                            text\n                            color=\"primary\"\n                            @click=\"datePickerShown = false\"\n                        >\n                            Cancel\n                        </v-btn>\n                        <v-btn\n                            text\n                            color=\"primary\"\n                            @click=\"$refs.datePicker.save(date);\n                                generate(date, selectedFilter);\"\n                        >\n                            Generate\n                        </v-btn>\n                    </v-date-picker>\n                </v-dialog>\n                <!-- /DATEPICKER -->\n\n                <v-select\n                    :items=\"myStore.state.generatedDataHistoryFilters\"\n                    v-model=\"selectedFilter\"\n                    label=\"Group By\"\n                    item-text=\"text\"\n                    item-value=\"value\"\n                    class=\"mr-3\"\n                    style=\"max-width:215px;\"\n                    :disabled=\"isGenerating\"\n                    outlined\n                    rounded\n                    hide-details\n                    dense\n                >\n                </v-select>\n\n                <v-btn\n                    title=\"Export to Excel\"\n                    icon\n                    dense\n                    rounded\n                    outlinedx\n                    color=\"success\"\n                    @click=\"exportToExcel()\"\n                    :disabled=\"generatedData.length < 1\"\n                >\n                    <v-icon>mdi-file-excel</v-icon>\n                </v-btn>\n            </v-app-bar>\n        </v-card-title>\n        <v-card-text class=\"pa-0 pb-4\">\n            <div\n                v-if=\"generatedData.length < 1\"\n                class=\"d-flex justify-center mt-5\"\n            >\n                <v-chip color=\"secondary\" small>\n                    No available data to display\n                </v-chip>\n            </div>\n            <GeneratedTable\n                v-else\n                :id=\"wrapperID\"\n                :generatedData=\"generatedData\"\n            >\n            </GeneratedTable>\n        </v-card-text>\n    </v-card>\n</template>\n\n<script>\nexport default {\n    components: {\n        GeneratedTable: () => import(\"./GeneratedTableWrapper.vue\"),\n    },\n\n    data: () => ({\n        datePickerShown: false,\n        date: [new Date(Date.now() - new Date().getTimezoneOffset() * 60000)\n            .toISOString()\n            .substr(0, 10)],\n        generatedData: [],\n        isGenerating: false,\n        wrapperID: 'gendata_history_wrapper',\n        selectedFilter: null,\n    }),\n\n    computed: {\n        // overall\n        lineCount() {\n            let count = 0;\n            this.generatedData.forEach(e => {\n                count += e[1].length;\n            });\n            return count;\n        },\n\n        dateRangeText() {\n            return this.date.join(' ~ ');\n        },\n\n        myStore() {\n            return this[this.PrincipalsStore.state.selectedPrincipalCode];\n        }\n    },\n\n    methods: {\n\n        /**\n         * This will regenerate the templated data\n         * and will be filtered based on the passed 'date'.\n         * The reult will also be grouped based on 'dataProp'\n         */\n        async generate(date, dataProp='') {\n            date.sort();\n            // const url =\n            //     this.AppStore.state.siteUrl + \"principals/\"\n            //      + `generated?date=${date}&table_generated=`\n            //      + `generated_${this.PrincipalsStore.state.selectedPrincipalCode}`;\n            const url =\n                this.AppStore.state.siteUrl + \"principals\"\n                 + `/generated`\n                 + `?date=${date}`\n                 + `&principal_code=${this.PrincipalsStore.state.selectedPrincipalCode}`;\n            try {\n                this.AppStore.state.showTopLoading = true;\n                this.isGenerating = true;\n                this.generatedData = [];\n                let res = await axios.get(url);\n\n                const grouped = res.data.generated_data.reduce(function(r, a) {\n                    r[a[dataProp]] = r[a[dataProp]] || [];\n                    r[a[dataProp]].push(a);\n                    return r;\n                }, Object.create(null));\n\n                this.generatedData = Object.entries(grouped);\n                this.isGenerating = false;\n                this.AppStore.state.showTopLoading = false;\n\n                this.dlgSelectDatesShown = false;\n            } catch (error) {\n                console.log(\"generate(): \", error);\n                this.AppStore.toast(error);\n            }\n        },\n\n        exportToExcel() {\n            const config = this.PrincipalsStore\n                .getHeaderAndFormat('generatedDataTableHeader');\n\n            this.PrincipalsStore.exportToExcel(\n                config.header,\n                this.PrincipalsStore.generatedDataSubset(\n                    this.generatedData,\n                    config.format\n                ),\n                null,\n                this.PrincipalsStore.state.selectedPrincipalCode\n            );\n        },\n    },\n\n    watch: {\n        selectedFilter(val) {\n            this.generate(this.date, val);\n        }\n    },\n\n    created() {\n        this.selectedFilter = this.myStore.state.generatedDataHistoryFilters[0].value;\n        // this.generate(this.date, this.selectedFilter);\n    },\n\n    mounted() {\n        console.log(\"GeneratedHistory component mounted\");\n    }\n};\n</script>\n","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _c(\n    \"v-card\",\n    { staticClass: \"elevation-0 pt-0\", attrs: { outlinedx: \"\" } },\n    [\n      _c(\n        \"v-card-title\",\n        { staticClass: \"pa-0\" },\n        [\n          _c(\n            \"v-app-bar\",\n            { attrs: { elevation: \"0\", colorx: \"white\" } },\n            [\n              _c(\"v-toolbar-title\", [\n                _vm._v(\n                  \"\\n                Generated Data History\\n                \"\n                ),\n                _vm.lineCount > 0\n                  ? _c(\n                      \"div\",\n                      [\n                        _c(\n                          \"v-chip\",\n                          {\n                            attrs: {\n                              \"x-small\": \"\",\n                              outlinedx: \"\",\n                              label: \"\",\n                              color: \"primary\"\n                            }\n                          },\n                          [\n                            _vm._v(\n                              \"\\n                        \" +\n                                _vm._s(_vm.lineCount) +\n                                \" total line/s\\n                    \"\n                            )\n                          ]\n                        )\n                      ],\n                      1\n                    )\n                  : _vm._e()\n              ]),\n              _vm._v(\" \"),\n              _c(\"v-spacer\"),\n              _vm._v(\" \"),\n              _c(\"v-text-field\", {\n                staticClass: \"mr-3\",\n                staticStyle: { \"max-width\": \"230px\" },\n                attrs: {\n                  label: \"Date (YYYY-MM-DD)\",\n                  \"hide-details\": \"\",\n                  readonly: \"\",\n                  dense: \"\",\n                  outlined: \"\",\n                  rounded: \"\",\n                  disabled: _vm.isGenerating\n                },\n                on: {\n                  click: function($event) {\n                    $event.stopPropagation()\n                    _vm.datePickerShown = true\n                  }\n                },\n                model: {\n                  value: _vm.dateRangeText,\n                  callback: function($$v) {\n                    _vm.dateRangeText = $$v\n                  },\n                  expression: \"dateRangeText\"\n                }\n              }),\n              _vm._v(\" \"),\n              _c(\n                \"v-dialog\",\n                {\n                  ref: \"datePicker\",\n                  attrs: { \"return-value\": _vm.date, width: \"290px\" },\n                  on: {\n                    \"update:returnValue\": function($event) {\n                      _vm.date = $event\n                    },\n                    \"update:return-value\": function($event) {\n                      _vm.date = $event\n                    }\n                  },\n                  model: {\n                    value: _vm.datePickerShown,\n                    callback: function($$v) {\n                      _vm.datePickerShown = $$v\n                    },\n                    expression: \"datePickerShown\"\n                  }\n                },\n                [\n                  _c(\n                    \"v-date-picker\",\n                    {\n                      attrs: { scrollable: \"\", range: \"\" },\n                      model: {\n                        value: _vm.date,\n                        callback: function($$v) {\n                          _vm.date = $$v\n                        },\n                        expression: \"date\"\n                      }\n                    },\n                    [\n                      _c(\"v-spacer\"),\n                      _vm._v(\" \"),\n                      _c(\n                        \"v-btn\",\n                        {\n                          attrs: { text: \"\", color: \"primary\" },\n                          on: {\n                            click: function($event) {\n                              _vm.datePickerShown = false\n                            }\n                          }\n                        },\n                        [\n                          _vm._v(\n                            \"\\n                        Cancel\\n                    \"\n                          )\n                        ]\n                      ),\n                      _vm._v(\" \"),\n                      _c(\n                        \"v-btn\",\n                        {\n                          attrs: { text: \"\", color: \"primary\" },\n                          on: {\n                            click: function($event) {\n                              _vm.$refs.datePicker.save(_vm.date)\n                              _vm.generate(_vm.date, _vm.selectedFilter)\n                            }\n                          }\n                        },\n                        [\n                          _vm._v(\n                            \"\\n                        Generate\\n                    \"\n                          )\n                        ]\n                      )\n                    ],\n                    1\n                  )\n                ],\n                1\n              ),\n              _vm._v(\" \"),\n              _c(\"v-select\", {\n                staticClass: \"mr-3\",\n                staticStyle: { \"max-width\": \"215px\" },\n                attrs: {\n                  items: _vm.myStore.state.generatedDataHistoryFilters,\n                  label: \"Group By\",\n                  \"item-text\": \"text\",\n                  \"item-value\": \"value\",\n                  disabled: _vm.isGenerating,\n                  outlined: \"\",\n                  rounded: \"\",\n                  \"hide-details\": \"\",\n                  dense: \"\"\n                },\n                model: {\n                  value: _vm.selectedFilter,\n                  callback: function($$v) {\n                    _vm.selectedFilter = $$v\n                  },\n                  expression: \"selectedFilter\"\n                }\n              }),\n              _vm._v(\" \"),\n              _c(\n                \"v-btn\",\n                {\n                  attrs: {\n                    title: \"Export to Excel\",\n                    icon: \"\",\n                    dense: \"\",\n                    rounded: \"\",\n                    outlinedx: \"\",\n                    color: \"success\",\n                    disabled: _vm.generatedData.length < 1\n                  },\n                  on: {\n                    click: function($event) {\n                      return _vm.exportToExcel()\n                    }\n                  }\n                },\n                [_c(\"v-icon\", [_vm._v(\"mdi-file-excel\")])],\n                1\n              )\n            ],\n            1\n          )\n        ],\n        1\n      ),\n      _vm._v(\" \"),\n      _c(\n        \"v-card-text\",\n        { staticClass: \"pa-0 pb-4\" },\n        [\n          _vm.generatedData.length < 1\n            ? _c(\n                \"div\",\n                { staticClass: \"d-flex justify-center mt-5\" },\n                [\n                  _c(\"v-chip\", { attrs: { color: \"secondary\", small: \"\" } }, [\n                    _vm._v(\n                      \"\\n                No available data to display\\n            \"\n                    )\n                  ])\n                ],\n                1\n              )\n            : _c(\"GeneratedTable\", {\n                attrs: { id: _vm.wrapperID, generatedData: _vm.generatedData }\n              })\n        ],\n        1\n      )\n    ],\n    1\n  )\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","import { render, staticRenderFns } from \"./GeneratedHistory.vue?vue&type=template&id=7ab5cd88&\"\nimport script from \"./GeneratedHistory.vue?vue&type=script&lang=js&\"\nexport * from \"./GeneratedHistory.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"E:\\\\KALOY\\\\PROJECTS\\\\DSG\\\\DSG_DEV\\\\node_modules\\\\vue-hot-reload-api\\\\dist\\\\index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!api.isRecorded('7ab5cd88')) {\n      api.createRecord('7ab5cd88', component.options)\n    } else {\n      api.reload('7ab5cd88', component.options)\n    }\n    module.hot.accept(\"./GeneratedHistory.vue?vue&type=template&id=7ab5cd88&\", function () {\n      api.rerender('7ab5cd88', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"resources/js/pages/Principals/common/GeneratedHistory.vue\"\nexport default component.exports","import mod from \"-!../../../../../node_modules/babel-loader/lib/index.js??ref--4-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./GeneratedHistory.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../node_modules/babel-loader/lib/index.js??ref--4-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./GeneratedHistory.vue?vue&type=script&lang=js&\"","export * from \"-!../../../../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./GeneratedHistory.vue?vue&type=template&id=7ab5cd88&\""],"sourceRoot":""}