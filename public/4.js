(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{100:function(e,t,o){"use strict";o.r(t);var s={name:"MasterUpload",props:["id"],data:function(){return{file:null,uploadResponse:{success:"",message:""}}},methods:{formSubmit:function(){var e=this,t=this;if(this.$refs.frm_upload.validate()){this.AppStore.overlay(!0);for(var o={headers:{"content-type":"multipart/form-data"},onUploadProgress:function(o){var s=o.loaded/t.file.size*100,a="Uploading...";s<100?a="Uploading... "+s.toFixed(0)+"%":100==s?a="File uploaded":s>100&&(a="Saving..."),e.AppStore.state.overlay.msg=a}},s=new FormData,a=0;a<this.file.length;a++)s.append("files["+a+"]",this.file[a]);var l=this.AppStore.state.siteUrl+"master/"+this.id+"/upload";axios.post(l,s,o).then((function(o){t.uploadResponse.success=o.data.success,t.uploadResponse.message=o.data.message,e.AppStore.overlay(!1),e.AppStore.toast(t.uploadResponse.message),e.file=null,e.MasterPrincipals.initPrincipals(),e.MasterCustomers.initCustomers(),e.MasterProducts.initProducts(),e.MasterCommon.state.isImportDialogOpen=!1})).catch((function(o){t.uploadResponse.success=!1,t.uploadResponse.message=o,e.AppStore.overlay(!1),e.AppStore.toast(o),console.log(t.uploadResponse)}))}else console.log("formSubmit(): An unexpected error occured")}},mounted:function(){console.log("MasterUpload mounted:",this.id)}},a=o(0),l=Object(a.a)(s,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("v-card",{attrs:{outlined:""}},[o("v-card-title",{staticClass:"mb-4"},[o("div",[e._v("\n            Upload Masterfile\n        ")]),e._v(" "),o("v-spacer"),e._v(" "),o("v-btn",{attrs:{icon:"",title:"Close"},on:{click:function(t){e.MasterCommon.state.isImportDialogOpen=!1}}},[o("v-icon",[e._v("mdi-close-box-outline")])],1)],1),e._v(" "),o("v-card-text",[o("v-row",[o("v-col",{attrs:{cols:"",lg:"8",md:"7",sm:"12"}},[o("v-form",{ref:"frm_upload"},[o("v-file-input",{attrs:{"small-chips":"",counter:"","show-size":"","truncate-length":"50",rounded:"",outlined:"",dense:"",required:"",accept:"text/csv",multiple:"",label:"Select a file to upload"},model:{value:e.file,callback:function(t){e.file=t},expression:"file"}})],1)],1),e._v(" "),o("v-col",{attrs:{cols:"",lg:"4",md:"5",sm:"12"}},[o("v-btn",{attrs:{dense:"",color:"primary",block:"",rounded:""},on:{click:function(t){return e.formSubmit()}}},[e._v("\n                    Submit\n                ")])],1)],1)],1)],1)}),[],!1,null,null,null);t.default=l.exports}}]);