(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{20:function(t,e,a){"use strict";a.r(e);var s={name:"InvoicesImport",data:function(){return{file:null}},methods:{formSubmit:function(){var t=this,e=this;if(this.$refs.frm_upload.validate())if(null!==this.file&&0!==this.file.length&&void 0!==this.file){this.AppStore.overlay(!0),this.PrincipalsStore.state.isGeneratingData=!0,this.AppStore.state.showTopLoading=!0;for(var a={headers:{"content-type":"multipart/form-data"},onUploadProgress:function(a){var s=a.loaded/e.file.size*100,i="Importing...";s<100?i="Uploading... "+s.toFixed(0)+"%":100==s?i="File uploaded":s>100&&(i="Generating data..."),t.AppStore.state.overlay.msg=i}},s=new FormData,i=0;i<this.file.length;i++)s.append("files["+i+"]",this.file[i]);var o=this.AppStore.state.siteUrl+"principals/"+this.PrincipalsStore.state.selectedPrincipalCode+"/invoices/import";axios.post(o,s,a).then((function(e){e.data.success;var a=e.data.message,s=e.data.output_template,i=(e.data.line_count,e.data.raw_invoices);t.AppStore.overlay(!1),t.PrincipalsStore.state.isGeneratingData=!1,t.AppStore.state.showTopLoading=!1,t.AppStore.toast(a),t.PrincipalsStore.state.currentGeneratedData=Object.entries(s),t.PrincipalsStore.state.currentRawInvoices=i,t.PrincipalsStore.state.sheetImport=!1})).catch((function(e){t.AppStore.overlay(!1),t.AppStore.toast(e),t.PrincipalsStore.state.isGeneratingData=!1,console.log("ImportResponse:",e)}))}else this.AppStore.toast("Please select file/s to import",1e3);else alert("An unexpected error occured")}},mounted:function(){console.log("InvoicesImport mounted.")}},i=a(0),o=Object(i.a)(s,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-card",{staticClass:"elevation-0 transparent pa-0",attrs:{outlinedx:""}},[a("v-card-text",{staticClass:"pa-0"},[a("v-row",{},[a("v-col",{staticClass:"pb-0",attrs:{cols:"",lg:"9",md:"7",sm:"8"}},[a("v-form",{ref:"frm_upload"},[a("v-file-input",{attrs:{"small-chips":"","show-size":"",rounded:"",outlined:"",dense:"",required:"",label:"Select file/s to import",accept:".txt",multiple:""},model:{value:t.file,callback:function(e){t.file=e},expression:"file"}})],1)],1),t._v(" "),a("v-col",{staticClass:"pb-0",attrs:{cols:"",lg:"3",md:"5",sm:"4"}},[a("v-btn",{attrs:{dense:"",color:"primary",block:"",rounded:"",depressed:"",loading:t.PrincipalsStore.state.isGeneratingData},on:{click:function(e){return t.formSubmit()}}},[t._v("\n                        Generate\n                    ")])],1)],1)],1)],1)}),[],!1,null,null,null);e.default=o.exports}}]);