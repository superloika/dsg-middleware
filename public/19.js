(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{i7VT:function(e,r,t){"use strict";t.r(r);var n=t("o0o1"),a=t.n(n);function s(e,r,t,n,a,s,o){try{var u=e[s](o),c=u.value}catch(e){return void t(e)}u.done?r(c):Promise.resolve(c).then(n,a)}var o={data:function(){var e=this;return{nameRegex:/^[a-zA-Z\s]+$/,usernameRegex:/^[a-zA-Z0-9]+$/,frm_edit_profile:!1,account:{id:this.ManageAccounts.state.toEdit.id,name:this.ManageAccounts.state.toEdit.name,old_username:this.ManageAccounts.state.toEdit.old_username,username:this.ManageAccounts.state.toEdit.username,user_type:this.ManageAccounts.state.toEdit.user_type,rules:{name:[function(e){return!!e||"Name is required"},function(e){return e.length>=2||"Name must be 2 characters or above"},function(r){return e.nameRegex.test(r)||"Invalid name. Use alpha characters only"}],username:[function(e){return!!e||"Username is required"},function(e){return e.length>=3||"Username must be 3 characters or above"},function(r){return e.usernameRegex.test(r)||"Invalid username"}],user_type:[function(e){return!!e||"User type is required"}]}},updatingProfile:!1,errMsgs:[],errMsgsShown:!1,errorMsgs:{}}},computed:{filteredUserTypes:function(){var e=this;return this.AppStore.state.userTypes.filter((function(r){return e.AppStore.isAdmin()?"super_admin"!=r&&"admin"!=r:r}))}},watch:{"account.name":function(){this.account.name=this.account.name.replace("  "," ").trim()}},methods:{updateProfile:function(){var e,r=this;return(e=a.a.mark((function e(){var t,n,s,o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=r,!r.$refs.frm_edit_profile.validate()){e.next=17;break}return n="".concat(r.AppStore.state.siteUrl,"accounts/update-profile"),s={_method:"PATCH",id:t.account.id,name:t.account.name,old_username:t.account.old_username,username:t.account.username,user_type:t.account.user_type},e.prev=4,r.updatingProfile=!0,e.next=8,axios.post(n,s);case 8:1==(o=e.sent).data?("Account"===r.$route.meta.name&&location.reload(),r.ManageAccounts.initUsers(),r.AppStore.toast("Account updated",2e3)):null!=o.data.invalidations||null!=o.data.invalidations?(r.errMsgs=[],r.errorMsgs={},r.errorMsgs=o.data.invalidations,Object.entries(o.data.invalidations).forEach((function(e){r.errMsgs.push(e[1][0])})),r.errMsgsShown=!0):null==o.data.errorInfo&&null==o.data.errorInfo||(r.AppStore.toast("An error occured",2e3),console.log(o.data.errorInfo)),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(4),console.log(e.t0),r.AppStore.toast(e.t0,3e3);case 16:r.updatingProfile=!1;case 17:case"end":return e.stop()}}),e,null,[[4,12]])})),function(){var r=this,t=arguments;return new Promise((function(n,a){var o=e.apply(r,t);function u(e){s(o,n,a,u,c,"next",e)}function c(e){s(o,n,a,u,c,"throw",e)}u(void 0)}))})()}},mounted:function(){console.log("AccountsEditProfile component mounted")}},u=t("KHd+"),c=Object(u.a)(o,(function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("v-container",[t("v-form",{ref:"frm_edit_profile",model:{value:e.frm_edit_profile,callback:function(r){e.frm_edit_profile=r},expression:"frm_edit_profile"}},[t("v-row",[t("v-col",{attrs:{cols:"12",md:"4",sm:"6"}},[t("v-text-field",{attrs:{outlined:"",dense:"",text:"",label:"Name *",required:"",rules:e.account.rules.name,error:null!=e.errorMsgs.name,"error-messages":null!=e.errorMsgs.name?e.errorMsgs.name:[]},model:{value:e.account.name,callback:function(r){e.$set(e.account,"name",r)},expression:"account.name"}})],1),e._v(" "),t("v-col",{attrs:{cols:"12",md:"4",sm:"6"}},[t("v-text-field",{attrs:{outlined:"",dense:"",text:"",label:"Username *",required:"",rules:e.account.rules.username,error:null!=e.errorMsgs.username,"error-messages":null!=e.errorMsgs.username?e.errorMsgs.username:[]},model:{value:e.account.username,callback:function(r){e.$set(e.account,"username",r)},expression:"account.username"}})],1),e._v(" "),t("v-col",{attrs:{cols:"12",md:"4",sm:"6"}},[t("v-select",{attrs:{items:e.filteredUserTypes,outlined:"",dense:"",text:"",label:"User Type",required:"",rules:e.account.rules.user_type,error:null!=e.errorMsgs.user_type,"error-messages":null!=e.errorMsgs.user_type?e.errorMsgs.user_type:[],disabled:e.account.id==e.AuthUser.id},model:{value:e.account.user_type,callback:function(r){e.$set(e.account,"user_type",r)},expression:"account.user_type"}})],1)],1),e._v(" "),t("v-row",{staticClass:"pt-0 pb-0",attrs:{"background-color":"red"}},[t("v-col",{staticClass:"pt-0 pb-0",attrs:{"background-color":"red"}},[t("v-btn",{staticClass:"float-lg-right float-md-right float-sm-right",attrs:{color:"primary",loading:e.updatingProfile,outlinedx:"",smallx:"",roundedx:""},on:{click:function(r){return e.updateProfile()}}},[e._v("\n                    Update Profile\n                ")])],1)],1)],1)],1)}),[],!1,null,null,null);r.default=c.exports}}]);