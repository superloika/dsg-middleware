(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{Gprq:function(e,t,s){"use strict";s.r(t);var i={name:"MasterfileUpload",props:["id","master_type"],data:function(){return{file:null,uploadResponse:{success:"",message:""}}},computed:{selectedPrincipalCode:function(){return this.PrincipalsStore.state.selectedPrincipalCode}},methods:{formSubmit:function(){var e=this,t=this;if(this.$refs.frm_upload.validate())if(null!==this.file&&0!==this.file.length&&void 0!==this.file){this.AppStore.overlay(!0);var s={headers:{"content-type":"multipart/form-data"},onUploadProgress:function(s){var i=s.loaded/t.file.size*100,o="";i<100?o="Uploading... "+i.toFixed(0)+"%":100==i?o="File uploaded":i>100&&(o="Saving..."),e.AppStore.state.overlay.msg=o}},i=new FormData;i.append("file",this.file);var o=this.AppStore.state.siteUrl+"principals/"+this.selectedPrincipalCode+"/"+this.id+"/upload";axios.post(o,i,s).then((function(s){t.uploadResponse.success=s.data.success,t.uploadResponse.message=s.data.message,e.AppStore.overlay(!1),e.AppStore.toast(t.uploadResponse.message),e.file=null,"items"==e.id?e.PrincipalsStore.initItems():"customers"==e.id?e.PrincipalsStore.initCustomers():"salesmen"==e.id&&e.PrincipalsStore.initSalesmen(),e.PrincipalsStore.state.isUploadMasterCustomersOpen=!1,e.PrincipalsStore.state.isUploadMasterItemsOpen=!1,e.PrincipalsStore.state.isUploadMasterSalesmenOpen=!1})).catch((function(s){t.uploadResponse.success=!1,t.uploadResponse.message=s,e.AppStore.overlay(!1),e.AppStore.toast(s)}))}else this.AppStore.toast("Please select file to upload",1e3);else alert("An unexpected error occured!")}},mounted:function(){console.log("MasterfileUpload mounted."),this.file=null}},o=s("KHd+"),a=Object(o.a)(i,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("v-card",{attrs:{outlined:""}},[s("v-card-title",{staticClass:"mb-6"},[s("div",[e._v("\r\n            Upload/update "+e._s(e.id)+" masterfile\r\n        ")]),e._v(" "),s("v-spacer"),e._v(" "),s("v-btn",{attrs:{icon:"",title:"Close"},on:{click:function(t){e.PrincipalsStore.state.isUploadMasterCustomersOpen=!1,e.PrincipalsStore.state.isUploadMasterItemsOpen=!1,e.PrincipalsStore.state.isUploadMasterSalesmenOpen=!1}}},[s("v-icon",[e._v("mdi-close-box-outline")])],1)],1),e._v(" "),s("v-card-text",[s("v-row",[s("v-col",{attrs:{cols:"",lg:"8",md:"7",sm:"12"}},[s("v-form",{ref:"frm_upload"},[s("v-file-input",{attrs:{"small-chips":"",counter:"","show-size":"","truncate-length":"50",rounded:"",outlined:"",dense:"",required:"",accept:"text/csv"},model:{value:e.file,callback:function(t){e.file=t},expression:"file"}})],1)],1),e._v(" "),s("v-col",{attrs:{cols:"",lg:"4",md:"5",sm:"12"}},[s("v-btn",{attrs:{dense:"",color:"primary",block:"",rounded:""},on:{click:function(t){return e.formSubmit()}}},[e._v("\r\n                    Submit\r\n                ")])],1)],1)],1)],1)}),[],!1,null,null,null);t.default=a.exports}}]);