(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{gYZQ:function(t,e,n){"use strict";n.r(e);var r=n("o0o1"),i=n.n(r);function a(t,e,n,r,i,a,c){try{var s=t[a](c),o=s.value}catch(t){return void n(t)}s.done?e(o):Promise.resolve(o).then(r,i)}var c={data:function(){return{frm_edit_principal:!1,account:{id:this.ManageAccounts.state.toEdit.id,user_type:this.ManageAccounts.state.toEdit.user_type,selected_principals:this.ManageAccounts.state.toEdit.principal_ids},updatingPrincipal:!1,errMsgs:[],errMsgsShown:!1,errorMsgs:{},principalsSearchKey:""}},computed:{principals:function(){return this.AppStore.state.principals},filteredPrincipals:function(){var t=this,e=new RegExp(this.principalsSearchKey,"i");return"*"===JSON.parse(this.AuthUser.principal_ids)[0]?this.principals.filter((function(n){return e.test(n.name)||!t.principalsSearchKey})):this.principals.filter((function(n){return(e.test(n.name)||!t.principalsSearchKey)&&t.AppStore.isInUserPrincipalIDs(n.id)}))}},methods:{updatePrincipal:function(){var t,e=this;return(t=i.a.mark((function t(){var n,r,a,c;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e,!e.$refs.frm_edit_principal.validate()){t.next=17;break}return r="".concat(e.AppStore.state.siteUrl,"accounts/update-principal-assignment"),a={_method:"PATCH",id:n.account.id,selected_principals:n.account.selected_principals},t.prev=4,e.updatingPrincipal=!0,t.next=8,axios.post(r,a);case 8:1==(c=t.sent).data?("Account"===e.$route.meta.name&&location.reload(),e.ManageAccounts.initUsers(),e.AppStore.toast("Account updated",2e3)):null!=c.data.invalidations||null!=c.data.invalidations?(e.errMsgs=[],e.errorMsgs={},e.errorMsgs=c.data.invalidations,Object.entries(c.data.invalidations).forEach((function(t){e.errMsgs.push(t[1][0])})),e.errMsgsShown=!0):null==c.data.errorInfo&&null==c.data.errorInfo||(e.AppStore.toast("An error occured",2e3),console.log(c.data.errorInfo)),t.next=16;break;case 12:t.prev=12,t.t0=t.catch(4),console.log(t.t0),e.AppStore.toast(t.t0,3e3);case 16:e.updatingPrincipal=!1;case 17:case"end":return t.stop()}}),t,null,[[4,12]])})),function(){var e=this,n=arguments;return new Promise((function(r,i){var c=t.apply(e,n);function s(t){a(c,r,i,s,o,"next",t)}function o(t){a(c,r,i,s,o,"throw",t)}s(void 0)}))})()}},mounted:function(){console.log("AccountsEditPrincipalAssignment component mounted",this.account)}},s=n("KHd+"),o=Object(s.a)(c,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-container",[n("v-form",{ref:"frm_edit_principal",model:{value:t.frm_edit_principal,callback:function(e){t.frm_edit_principal=e},expression:"frm_edit_principal"}},[n("v-row",[n("v-col",{attrs:{cols:"12"}},[n("v-select",{attrs:{items:t.filteredPrincipals,"item-text":"name","item-value":"id",label:"Designated Principals",multiple:"",dense:"",outlined:"",clearable:""},scopedSlots:t._u([{key:"prepend-item",fn:function(){return[n("div",{staticClass:"mx-2 mb-0 pb-0"},[n("v-text-field",{attrs:{dense:"",rounded:"","solo-inverted":"",clearable:"",placeholder:"Search",flat:""},model:{value:t.principalsSearchKey,callback:function(e){t.principalsSearchKey=e},expression:"principalsSearchKey"}})],1)]},proxy:!0}]),model:{value:t.account.selected_principals,callback:function(e){t.$set(t.account,"selected_principals",e)},expression:"account.selected_principals"}})],1)],1),t._v(" "),n("v-row",{staticClass:"pt-0 pb-0",attrs:{"background-color":"red"}},[n("v-col",{staticClass:"pt-0 pb-0",attrs:{"background-color":"red"}},[n("v-btn",{staticClass:"float-lg-right float-md-right float-sm-right",attrs:{color:"primary",loading:t.updatingPrincipal,outlinedx:"",smallx:"",roundedx:""},on:{click:function(e){return t.updatePrincipal()}}},[t._v("\n                    Update\n                ")])],1)],1)],1)],1)}),[],!1,null,null,null);e.default=o.exports}}]);