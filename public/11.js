(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{115:function(e,t,s){"use strict";s.r(t);var o={name:"MasterUpload",props:["id"],data:function(){return{file:null,uploadResponse:{success:"",message:""}}},methods:{formSubmit:function(){var e=this,t=this;if(this.$refs.frm_upload.validate()){this.AppStore.overlay(!0);for(var s={headers:{"content-type":"multipart/form-data"},onUploadProgress:function(s){var o=s.loaded/t.file.size*100,a="Uploading...";o<100?a="Uploading... "+o.toFixed(0)+"%":100==o?a="File uploaded":o>100&&(a="Saving..."),e.AppStore.state.overlay.msg=a}},o=new FormData,a=0;a<this.file.length;a++)o.append("files["+a+"]",this.file[a]);var l=this.AppStore.state.siteUrl+"master/"+this.id+"/upload";axios.post(l,o,s).then((function(s){t.uploadResponse.success=s.data.success,t.uploadResponse.message=s.data.message,e.AppStore.overlay(!1),e.AppStore.toast(t.uploadResponse.message),e.file=null,e.MasterPrincipals.initPrincipals(),e.MasterCustomers.initCustomers(),e.MasterItems.initItems(),e.AppStore.state.dlgImportMaster=!1})).catch((function(s){t.uploadResponse.success=!1,t.uploadResponse.message=s,e.AppStore.overlay(!1),e.AppStore.toast(s),console.log(t.uploadResponse)}))}else console.log("formSubmit(): An unexpected error occured")}},mounted:function(){console.log("MasterUpload mounted:",this.id)}},a=s(0),l=Object(a.a)(o,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("v-card",{attrs:{outlined:""}},[s("v-card-title",{staticClass:"mb-4"},[s("div",[e._v("\n            Upload Masterfile\n        ")]),e._v(" "),s("v-spacer"),e._v(" "),s("v-btn",{attrs:{icon:"",title:"Close"},on:{click:function(t){e.AppStore.state.dlgImportMaster=!1}}},[s("v-icon",[e._v("mdi-close-box-outline")])],1)],1),e._v(" "),s("v-card-text",[s("v-row",[s("v-col",{attrs:{cols:"",lg:"9",md:"8",sm:"12"}},[s("v-form",{ref:"frm_upload"},[s("v-file-input",{attrs:{"small-chips":"",counter:"","show-size":"","truncate-length":"30",rounded:"",outlined:"",dense:"",required:"",accept:".csv, .txt",multiple:"",label:"Select a file to upload"},model:{value:e.file,callback:function(t){e.file=t},expression:"file"}})],1)],1),e._v(" "),s("v-col",{attrs:{cols:"",lg:"3",md:"4",sm:"12"}},[s("v-btn",{attrs:{dense:"",color:"primary",block:"",rounded:""},on:{click:function(t){return e.formSubmit()}}},[e._v("\n                    Submit\n                ")])],1)],1)],1)],1)}),[],!1,null,null,null);t.default=l.exports}}]);