(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{"0EzI":function(e,o,t){"use strict";t.r(o);var a={name:"InvoicesUpload",props:["searchKey","principalCodeFilter"],components:{InvoiceUploadSummary:function(){return t.e(2).then(t.bind(null,"m/XK"))}},data:function(){return{file:null,selected_group:"",uploadResponse:{}}},computed:{keywordsColor:function(){return"accent"}},methods:{upload:function(){var e=this,o=this;this.AppStore.overlay(!0);for(var t={headers:{"content-type":"multipart/form-data"},onUploadProgress:function(t){var a=t.loaded/o.file.size*100,s="Uploading...";a<100?s="Uploading... "+a.toFixed(0)+"%":100==a?s="File uploaded":a>100&&(s="Saving..."),e.AppStore.state.overlay.msg=s}},a=new FormData,s=0;s<this.file.length;s++)a.append("files["+s+"]",this.file[s]);a.append("terminal",this.selected_group);var n=this.AppStore.state.siteUrl+"invoices/upload";axios.post(n,a,t).then((function(o){o.data.success;var t=o.data.message;e.AppStore.overlay(!1),e.AppStore.toast(t),e.file=null,e.selected_group="",e.InvoicesStore.initInvoices(e.searchKey,e.principalCodeFilter),e.uploadResponse=o.data,o.data.success&&(e.InvoicesStore.state.isUploadSummaryShown=!0)})).catch((function(o){e.AppStore.overlay(!1),e.AppStore.toast(o)}))},showPreviousSummary:function(){this.InvoicesStore.state.isUploadSummaryShown=!0}},mounted:function(){console.log("InvoicesUpload mounted.")}},s=t("KHd+"),n=Object(s.a)(a,(function(){var e=this,o=e.$createElement,t=e._self._c||o;return t("v-card",{staticClass:"elevation-0 transparent pa-0"},[t("v-card-text",{},[t("v-row",{staticClass:"py-0"},[t("v-col",{staticClass:"pb-0",attrs:{cols:"",lg:"9",md:"9",sm:"12"}},[t("v-form",{ref:"frm_upload"},[t("v-file-input",{attrs:{"small-chips":"","show-sizex":"",rounded:"",outlined:"",dense:"",required:"",placeholder:"Select text files to upload (invoices)",accept:".txt",multiple:"",color:"primary","background-color":"white"},model:{value:e.file,callback:function(o){e.file=o},expression:"file"}})],1)],1),e._v(" "),t("v-col",{staticClass:"pb-0",attrs:{cols:"",lg:"3",md:"3",sm:"12"}},[t("v-btn",{attrs:{dense:"",color:"primary",block:"",rounded:"",disabled:null==e.file||e.file.length<1||"XXX"==e.selected_group},on:{click:function(o){return e.upload()}}},[e._v("\n                    Upload\n                ")])],1)],1),e._v(" "),t("div",{staticClass:"ma-0 pa-0"}),e._v(" "),t("v-row",{staticClass:"py-0"},[t("v-col",[t("small",[t("strong",[e._v("Important Note:")]),e._v("\n                    Filenames should include a group keyword\n                    in order for the system to identify which group the data came from.\n                    Keyword includes\n                        "),e._l(e.InvoicesStore.state.groups,(function(o,a){return t("v-chip",{key:a,staticClass:"px-2 mr-1",attrs:{"x-small":"",color:e.keywordsColor}},[e._v("\n                            "+e._s(o.group_code)+"\n                        ")])})),e._v(" "),t("br"),e._v('Example: "CWDG_PCS Sept 1-5.txt"\n                ')],2)])],1)],1),e._v(" "),t("v-dialog",{attrs:{"max-width":"550px"},model:{value:e.InvoicesStore.state.isUploadSummaryShown,callback:function(o){e.$set(e.InvoicesStore.state,"isUploadSummaryShown",o)},expression:"InvoicesStore.state.isUploadSummaryShown"}},[t("InvoiceUploadSummary",{attrs:{uploadResponse:e.uploadResponse}})],1)],1)}),[],!1,null,null,null);o.default=n.exports}}]);