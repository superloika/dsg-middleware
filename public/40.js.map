{"version":3,"sources":["webpack:///resources/js/pages/ManageAccounts/AccountsEditProfile.vue","webpack:///./resources/js/pages/ManageAccounts/AccountsEditProfile.vue?e369","webpack:///./resources/js/pages/ManageAccounts/AccountsEditProfile.vue","webpack:///./resources/js/pages/ManageAccounts/AccountsEditProfile.vue?68ac","webpack:///./resources/js/pages/ManageAccounts/AccountsEditProfile.vue?c772"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4FA;AACA,MADA,kBACA;AAAA;;AACA;AACA,gCADA;AAEA,qCAFA;AAGA,6BAHA;AAIA;AACA,+CADA;AAEA,mDAFA;AAGA,mEAHA;AAIA,2DAJA;AAKA,6DALA;AAOA;AACA,iBACA;AAAA;AAAA,WADA,EAEA;AAAA,mBACA,iBACA,oCAFA;AAAA,WAFA,EAKA;AAAA,mBACA,2BACA,yCAFA;AAAA,WALA,CADA;AAUA,qBACA;AAAA;AAAA,WADA,EAEA;AAAA,mBACA,iBACA,wCAFA;AAAA,WAFA,EAKA;AAAA;AAAA,WALA,CAVA;AAkBA;AAAA;AAAA;AAlBA;AAPA,OAJA;AAgCA,4BAhCA;AAiCA,iBAjCA;AAkCA,yBAlCA;AAmCA;AAnCA;AAqCA,GAvCA;AAyCA;AACA;AACA;AACA;AAHA,GAzCA;AA+CA;AACA,iBADA,2BACA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA,kBADA,GACA,MADA;;AAAA,qBAEA,wCAFA;AAAA;AAAA;AAAA;;AAGA,mBAHA,aAGA,6BAHA;AAKA,uBALA,GAKA;AACA,kCADA;AAEA,mCAFA;AAGA,uCAHA;AAIA,uDAJA;AAKA,+CALA;AAMA;AANA,iBALA;AAAA;AAeA;AAfA;AAAA,uBAgBA,wBAhBA;;AAAA;AAgBA,wBAhBA;;AAiBA;AACA;AACA;AACA,mBAHA,CAKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAEA,oDAdA,CAeA;;;AACA;AACA,iBAjBA,MAiBA,IACA,4CACA,mCAFA,EAGA;AACA;AACA;AACA;AACA,sEACA;AACA;AACA,mBAHA,EAJA,CASA;;AACA;AACA,iBAdA,MAcA,IACA,mCACA,oCAFA,EAGA;AACA;;AACA;AACA;;AAtDA;AAAA;;AAAA;AAAA;AAAA;AAwDA;;AACA;;AAzDA;AA2DA;;AA3DA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AA6DA;AA9DA,GA/CA;AAgHA,SAhHA,qBAgHA;AACA;AACA;AAlHA,G;;;;;;;;;;;;AC5FA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB,SAAS,+BAA+B,EAAE;AAC3D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA,uBAAuB;AACvB;AACA;AACA,mBAAmB;AACnB;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB,SAAS,+BAA+B,EAAE;AAC3D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA,uBAAuB;AACvB;AACA;AACA,mBAAmB;AACnB;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB,SAAS,+BAA+B,EAAE;AAC3D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA,uBAAuB;AACvB;AACA;AACA,mBAAmB;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,mCAAmC,4BAA4B,EAAE;AAC9E;AACA;AACA;AACA;AACA;AACA,0BAA0B;AAC1B,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB;AACvB;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACxKA;AAAA;AAAA;AAAA;AAAkG;AAC3B;AACL;;;AAGlE;AACgG;AAChG,gBAAgB,2GAAU;AAC1B,EAAE,yFAAM;AACR,EAAE,8FAAM;AACR,EAAE,uGAAe;AACjB;AACA;AACA;AACA;;AAEA;;AAEA;AACA,IAAI,KAAU,EAAE,YAiBf;AACD;AACe,gF;;;;;;;;;;;;ACtCf;AAAA;AAAA,wCAAyM,CAAgB,+PAAG,EAAC,C;;;;;;;;;;;;ACA7N;AAAA;AAAA;AAAA;AAAA;AAAA","file":"40.js","sourcesContent":["<template>\r\n    <v-container>\r\n        <!-- <v-alert\r\n            dense\r\n            text\r\n            type=\"error\"\r\n            dismissible\r\n            transition=\"scale-transition\"\r\n            v-model=\"errMsgsShown\"\r\n        >\r\n            <div>\r\n                <p\r\n                    class=\"ma-0 pa-0\"\r\n                    v-for=\"(errMsg, index) in errMsgs\"\r\n                    :key=\"index\"\r\n                >\r\n                    {{ errMsg }}\r\n                </p>\r\n                <br />\r\n            </div>\r\n        </v-alert> -->\r\n\r\n        <v-form v-model=\"frm_edit_profile\" ref=\"frm_edit_profile\">\r\n            <v-row>\r\n                <v-col cols=\"12\" md=\"4\" sm=\"6\">\r\n                    <v-text-field\r\n                        outlined\r\n                        dense\r\n                        text\r\n                        label=\"Name *\"\r\n                        required\r\n                        v-model=\"account.name\"\r\n                        :rules=\"account.rules.name\"\r\n                        :error=\"(errorMsgs.name != undefined) ? true : false\"\r\n                        :error-messages=\"(errorMsgs.name != undefined) ? errorMsgs.name : []\"\r\n                    ></v-text-field>\r\n                </v-col>\r\n\r\n                <v-col cols=\"12\" md=\"4\" sm=\"6\">\r\n                    <v-text-field\r\n                        outlined\r\n                        dense\r\n                        text\r\n                        label=\"Username *\"\r\n                        required\r\n                        v-model=\"account.username\"\r\n                        :rules=\"account.rules.username\"\r\n                        :error=\"(errorMsgs.username != undefined) ? true : false\"\r\n                        :error-messages=\"(errorMsgs.username != undefined) ? errorMsgs.username : []\"\r\n                    ></v-text-field>\r\n                </v-col>\r\n\r\n\r\n\r\n                <v-col cols=\"12\" md=\"4\" sm=\"6\">\r\n                    <v-select\r\n                        :items=\"AppStore.state.userTypes\"\r\n                        outlined\r\n                        dense\r\n                        text\r\n                        label=\"User Type\"\r\n                        required\r\n                        v-model=\"account.user_type\"\r\n                        :rules=\"account.rules.user_type\"\r\n                        :error=\"(errorMsgs.user_type != undefined) ? true : false\"\r\n                        :error-messages=\"(errorMsgs.user_type != undefined) ? errorMsgs.user_type : []\"\r\n                        :disabled=\"account.id == AuthUser.id\"\r\n                    >\r\n                    </v-select>\r\n                </v-col>\r\n            </v-row>\r\n\r\n            <v-row class=\"pt-0 pb-0\" background-color=\"red\">\r\n                <v-col class=\"pt-0 pb-0\" background-color=\"red\">\r\n                    <v-btn\r\n                        color=\"primary\"\r\n                        @click=\"updateProfile()\"\r\n                        :loading=\"updatingProfile\"\r\n                        class=\"float-lg-right float-md-right float-sm-right\"\r\n                        outlinedx\r\n                        smallx\r\n                        roundedx\r\n                    >\r\n                        Update Profile\r\n                    </v-btn>\r\n                </v-col>\r\n            </v-row>\r\n        </v-form>\r\n    </v-container>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n    data() {\r\n        return {\r\n            nameRegex: /^[a-zA-Z\\s]+$/,\r\n            usernameRegex: /^[a-zA-Z0-9]+$/,\r\n            frm_edit_profile: false,\r\n            account: {\r\n                id: this.ManageAccounts.state.toEdit.id,\r\n                name: this.ManageAccounts.state.toEdit.name,\r\n                old_username: this.ManageAccounts.state.toEdit.old_username,\r\n                username: this.ManageAccounts.state.toEdit.username,\r\n                user_type: this.ManageAccounts.state.toEdit.user_type,\r\n\r\n                rules: {\r\n                    name: [\r\n                        v => !!v || \"Name is required\",\r\n                        v =>\r\n                            v.length >= 8 ||\r\n                            \"Name must be 8 characters or above\",\r\n                        v =>\r\n                            this.nameRegex.test(v) ||\r\n                            \"Invalid name. Use alpha characters only\"\r\n                    ],\r\n                    username: [\r\n                        v => !!v || \"Username is required\",\r\n                        v =>\r\n                            v.length >= 5 ||\r\n                            \"Username must be 5 characters or above\",\r\n                        v => this.usernameRegex.test(v) || \"Invalid username\"\r\n                    ],\r\n\r\n                    user_type: [v => !!v || \"User type is required\"]\r\n                }\r\n            },\r\n            updatingProfile: false,\r\n            errMsgs: [],\r\n            errMsgsShown: false,\r\n            errorMsgs: {},\r\n        };\r\n    },\r\n\r\n    watch: {\r\n        \"account.name\": function() {\r\n            this.account.name = this.account.name.replace(\"  \", \" \").trim();\r\n        }\r\n    },\r\n\r\n    methods: {\r\n        async updateProfile() {\r\n            const vm = this;\r\n            if (this.$refs.frm_edit_profile.validate()) {\r\n                let url = `${this.AppStore.state.siteUrl}accounts/update-profile`;\r\n\r\n                let payload = {\r\n                    _method: \"PATCH\",\r\n                    id: vm.account.id,\r\n                    name: vm.account.name,\r\n                    old_username: vm.account.old_username,\r\n                    username: vm.account.username,\r\n                    user_type: vm.account.user_type\r\n                }\r\n\r\n                try {\r\n                    this.updatingProfile = true;\r\n                    let response = await axios.post(url, payload);\r\n                    if (response.data == true) {\r\n                        if(this.$route.meta.name==='Account') {\r\n                            location.reload();\r\n                        }\r\n\r\n                        // temp\r\n                        // this.ManageAccounts.state.toEdit.name = vm.account.name;\r\n                        // this.ManageAccounts.state.toEdit.old_username =\r\n                        //     vm.account.username;\r\n                        // this.ManageAccounts.state.toEdit.username =\r\n                        //     vm.account.username;\r\n                        // this.ManageAccounts.state.toEdit.user_type =\r\n                        //     vm.account.user_type;\r\n\r\n                        this.ManageAccounts.initUsers();\r\n                        // this.ManageAccounts.state.modalEditIsOpen = false;\r\n                        this.AppStore.toast(\"Account updated\", 2000);\r\n                    } else if (\r\n                        response.data.invalidations != undefined ||\r\n                        response.data.invalidations != null\r\n                    ) {\r\n                        this.errMsgs = [];\r\n                        this.errorMsgs = {};\r\n                        this.errorMsgs = response.data.invalidations;\r\n                        Object.entries(response.data.invalidations).forEach(\r\n                            field => {\r\n                                this.errMsgs.push(field[1][0]);\r\n                            }\r\n                        );\r\n                        // this.AppStore.toast(this.errMsgs, 3000);\r\n                        this.errMsgsShown = true;\r\n                    } else if (\r\n                        response.data.errorInfo != null ||\r\n                        response.data.errorInfo != undefined\r\n                    ) {\r\n                        this.AppStore.toast(\"An error occured\", 2000);\r\n                        console.log(response.data.errorInfo);\r\n                    }\r\n                } catch (error) {\r\n                    console.log(error);\r\n                    this.AppStore.toast(error, 3000);\r\n                }\r\n                this.updatingProfile = false;\r\n            }\r\n        }\r\n    },\r\n\r\n    mounted() {\r\n        console.log('AccountsEditProfile component mounted');\r\n    },\r\n\r\n};\r\n</script>\r\n","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _c(\n    \"v-container\",\n    [\n      _c(\n        \"v-form\",\n        {\n          ref: \"frm_edit_profile\",\n          model: {\n            value: _vm.frm_edit_profile,\n            callback: function($$v) {\n              _vm.frm_edit_profile = $$v\n            },\n            expression: \"frm_edit_profile\"\n          }\n        },\n        [\n          _c(\n            \"v-row\",\n            [\n              _c(\n                \"v-col\",\n                { attrs: { cols: \"12\", md: \"4\", sm: \"6\" } },\n                [\n                  _c(\"v-text-field\", {\n                    attrs: {\n                      outlined: \"\",\n                      dense: \"\",\n                      text: \"\",\n                      label: \"Name *\",\n                      required: \"\",\n                      rules: _vm.account.rules.name,\n                      error: _vm.errorMsgs.name != undefined ? true : false,\n                      \"error-messages\":\n                        _vm.errorMsgs.name != undefined\n                          ? _vm.errorMsgs.name\n                          : []\n                    },\n                    model: {\n                      value: _vm.account.name,\n                      callback: function($$v) {\n                        _vm.$set(_vm.account, \"name\", $$v)\n                      },\n                      expression: \"account.name\"\n                    }\n                  })\n                ],\n                1\n              ),\n              _vm._v(\" \"),\n              _c(\n                \"v-col\",\n                { attrs: { cols: \"12\", md: \"4\", sm: \"6\" } },\n                [\n                  _c(\"v-text-field\", {\n                    attrs: {\n                      outlined: \"\",\n                      dense: \"\",\n                      text: \"\",\n                      label: \"Username *\",\n                      required: \"\",\n                      rules: _vm.account.rules.username,\n                      error: _vm.errorMsgs.username != undefined ? true : false,\n                      \"error-messages\":\n                        _vm.errorMsgs.username != undefined\n                          ? _vm.errorMsgs.username\n                          : []\n                    },\n                    model: {\n                      value: _vm.account.username,\n                      callback: function($$v) {\n                        _vm.$set(_vm.account, \"username\", $$v)\n                      },\n                      expression: \"account.username\"\n                    }\n                  })\n                ],\n                1\n              ),\n              _vm._v(\" \"),\n              _c(\n                \"v-col\",\n                { attrs: { cols: \"12\", md: \"4\", sm: \"6\" } },\n                [\n                  _c(\"v-select\", {\n                    attrs: {\n                      items: _vm.AppStore.state.userTypes,\n                      outlined: \"\",\n                      dense: \"\",\n                      text: \"\",\n                      label: \"User Type\",\n                      required: \"\",\n                      rules: _vm.account.rules.user_type,\n                      error:\n                        _vm.errorMsgs.user_type != undefined ? true : false,\n                      \"error-messages\":\n                        _vm.errorMsgs.user_type != undefined\n                          ? _vm.errorMsgs.user_type\n                          : [],\n                      disabled: _vm.account.id == _vm.AuthUser.id\n                    },\n                    model: {\n                      value: _vm.account.user_type,\n                      callback: function($$v) {\n                        _vm.$set(_vm.account, \"user_type\", $$v)\n                      },\n                      expression: \"account.user_type\"\n                    }\n                  })\n                ],\n                1\n              )\n            ],\n            1\n          ),\n          _vm._v(\" \"),\n          _c(\n            \"v-row\",\n            { staticClass: \"pt-0 pb-0\", attrs: { \"background-color\": \"red\" } },\n            [\n              _c(\n                \"v-col\",\n                {\n                  staticClass: \"pt-0 pb-0\",\n                  attrs: { \"background-color\": \"red\" }\n                },\n                [\n                  _c(\n                    \"v-btn\",\n                    {\n                      staticClass:\n                        \"float-lg-right float-md-right float-sm-right\",\n                      attrs: {\n                        color: \"primary\",\n                        loading: _vm.updatingProfile,\n                        outlinedx: \"\",\n                        smallx: \"\",\n                        roundedx: \"\"\n                      },\n                      on: {\n                        click: function($event) {\n                          return _vm.updateProfile()\n                        }\n                      }\n                    },\n                    [\n                      _vm._v(\n                        \"\\n                    Update Profile\\n                \"\n                      )\n                    ]\n                  )\n                ],\n                1\n              )\n            ],\n            1\n          )\n        ],\n        1\n      )\n    ],\n    1\n  )\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","import { render, staticRenderFns } from \"./AccountsEditProfile.vue?vue&type=template&id=4c00497e&\"\nimport script from \"./AccountsEditProfile.vue?vue&type=script&lang=js&\"\nexport * from \"./AccountsEditProfile.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"C:\\\\laragon\\\\www\\\\DSG-MIDDLEWARE\\\\node_modules\\\\vue-hot-reload-api\\\\dist\\\\index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!api.isRecorded('4c00497e')) {\n      api.createRecord('4c00497e', component.options)\n    } else {\n      api.reload('4c00497e', component.options)\n    }\n    module.hot.accept(\"./AccountsEditProfile.vue?vue&type=template&id=4c00497e&\", function () {\n      api.rerender('4c00497e', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"resources/js/pages/ManageAccounts/AccountsEditProfile.vue\"\nexport default component.exports","import mod from \"-!../../../../node_modules/babel-loader/lib/index.js??ref--4-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AccountsEditProfile.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/babel-loader/lib/index.js??ref--4-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AccountsEditProfile.vue?vue&type=script&lang=js&\"","export * from \"-!../../../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AccountsEditProfile.vue?vue&type=template&id=4c00497e&\""],"sourceRoot":""}